# Backend Environment Variables Example
# Set these in Railway Dashboard > Variables

# Database Configuration (Neon)
DATABASE_URL=postgresql://user:password@host.neon.tech/dbname?sslmode=require
DATABASE_URL_UNPOOLED=postgresql://user:password@host.neon.tech/dbname?sslmode=require

# Security
JWT_SECRET=generate-a-random-32-character-string
JWT_EXPIRATION=7d
JWT_REMEMBER_EXPIRATION=30d
NODE_ENV=production

# Port (Railway sets this automatically)
# PORT=3001

# Proxy / IP handling
# Recommended: set to 1 when behind a single proxy (Railway/Render/Netlify/Cloudflare)
# Accepts: true/false, number of hops, IP/CIDR, or comma-separated list
TRUST_PROXY=1

# CORS Configuration
# Update with your Netlify URL and custom domain
CORS_ORIGINS=https://your-site.netlify.app,https://your-custom-domain.com
# Optional explicit primary frontend origin (merged into allowlist)
FRONTEND_URL=https://your-custom-domain.com

# Security Headers
ENABLE_CSP=true
# Optionally override CSP
# CSP_HEADER=default-src 'self'; img-src 'self' data: https:; media-src 'self' https:; style-src 'self' 'unsafe-inline' https:; font-src 'self' data: https:; connect-src 'self' https:; frame-ancestors 'none'; base-uri 'self'; form-action 'self'

# API Docs (Swagger)
# Disabled by default in production unless explicitly enabled
ENABLE_SWAGGER=false

# Upload Limits
UPLOAD_MAX_PIXELS=25000000

# Cookie Settings (for production)
AUTH_COOKIE_ENABLED=true
AUTH_COOKIE_NAME=access_token
AUTH_COOKIE_SAMESITE=None
AUTH_COOKIE_SECURE=true
# Optional: set cookie domain if using a custom domain different from API host
# AUTH_COOKIE_DOMAIN=your-custom-domain.com

# CSRF Protection (double-submit cookie)
# Enabled by default when AUTH_COOKIE_ENABLED=true; set to 'false' to disable
CSRF_PROTECTION=true
CSRF_COOKIE_NAME=csrf_token
CSRF_HEADER_NAME=X-CSRF-Token
# Comma-separated paths to skip CSRF checks (typically auth endpoints)
CSRF_SKIP_PATHS=/api/auth/login,/api/auth/register

# Rate Limiting (optional)
# Enable basic global limiter and a tighter limiter for /api/posts/search
ENABLE_RATE_LIMITING=true
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=100
SEARCH_RATE_LIMIT_TTL=60
SEARCH_RATE_LIMIT_LIMIT=30
# Dedicated login rate limiting to slow brute-force attempts
AUTH_LOGIN_RATE_LIMIT_WINDOW_MS=900000
AUTH_LOGIN_RATE_LIMIT_MAX=10

# Optional: Seed Admin User
SEED_ADMIN_EMAIL=admin@example.com
SEED_ADMIN_USERNAME=admin
SEED_ADMIN_PASSWORD=changeme123!

